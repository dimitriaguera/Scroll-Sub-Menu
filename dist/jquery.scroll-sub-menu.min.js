!function(t,e,n,s){"use strict";function i(t){this.settings=t,this.active=!1,this.range={},this.state={active:null,next:null,baby:!0}}function l(t,e){var n=this;setTimeout(function(){if(u.call(n,t),o.call(n,t),v.call(n,t),r.call(n),n.state.baby=!1,"function"==typeof e)return e.call(t,n)},0)}function a(t,e,n){var s,i="";return M[t]?M[t][e]?(n&&(i+='\nValue "'+n+'"'),i+="\n"+M[t].basic,i+="\n"+M[t][e]):(e&&(i+='\nValue "'+e+'"'),i+="\n"+M[t].basic):i=t,s=new Error(i),console.log(s),s}function c(e){var n=null,s=typeof e;switch(s){case"string":e=e.replace("#",""),n=t("#"+e);break;case"object":e instanceof jQuery?n=e:a("selector");break;default:a("selector")}return 0===n.length&&a("noResult"),n}function u(n){var s=n.offset().top,i=n.outerHeight(),l=t(e).height(),c=0,u=0;if("string"==typeof this.settings.lineActive){switch(this.settings.lineActive){case"top":c=0;break;case"bottom":c=l;break;case"middle":c=l/2;break;default:a("settings","lineActive",this.settings.lineActive),c=l/2}this.settings.delta=c}else"number"==typeof this.settings.lineActive?this.settings.delta=c=this.settings.lineActive:a("settings","lineActive",this.settings.lineActive);if("string"==typeof this.settings.deltaSectionEnd){switch(this.settings.deltaSectionEnd){case"top":u=0;break;case"bottom":u=l;break;case"middle":u=l/2;break;default:a("settings","deltaSectionEnd",this.settings.deltaSectionEnd),u=l/2}this.settings.deltaSection=u}else"number"==typeof this.settings.deltaSectionEnd?this.settings.deltaSection=u=this.settings.deltaSectionEnd:a("settings","deltaSectionEnd",this.settings.deltaSectionEnd);this.range.min=s,this.range.max=s+i-u}function o(e){var n,s,i,l=[],a=[],u=[],o=this,r=e.find("."+this.settings.subSelector),h=t("<div/>").addClass(this.settings.wrapperAttrs.class).css(this.settings.wrapperCSS),v=t("<ul/>").appendTo(h),b=t("<span/>").addClass(this.settings.navPillsAttrs.class).css(this.settings.navPillsCSS).appendTo(h),f=this.settings.menuTarget?c(this.settings.menuTarget):e;r.each(function(){var e=t(this);n=e.data("ssm-title"),s=m.call(o,n),v.append(s.li),i=g.call(o,e,s.span,s.pills),s.span.click(p.bind(o,"clickHandlerFn",i)),l.push(i),a.push(s.span),u.push(s.pills),"function"==typeof o.settings.elementCreateCallback&&o.settings.elementCreateCallback.call(s.li,e,o)}),f.append(h),this.navigation=l,this.menu={wrapper:h,menuItems:a,menuPills:u,navPills:{navPills:b,height:b.outerHeight()}},d.call(this),this.menu.wrapper.css({display:"none"})}function r(){var t,e=y(),n=this.navigation.length;if(e<this.range.min||e>this.range.max)return void(this.active&&(this.active=!1,p.call(this,"animExitFn")));for(this.active&&!this.state.baby||(this.active=!0,p.call(this,"animEnterFn")),t=0;t<n;t++)b(this.navigation[t],e,this.settings.delta)?t!==this.state.active&&(this.navigation[t].menuElmt.menuElmt.addClass(this.settings.activeClass),this.state.active=t,p.call(this,"animWhileFn",t)):(this.navigation[t].menuElmt.menuElmt.removeClass(this.settings.activeClass),t===this.state.active&&(this.state.active=null));"function"==typeof this.settings.scrollStepCallback&&this.settings.scrollStepCallback.call(this,t)}function h(t){var e,n,s=this.navigation.length;for(e=0;e<s;e++)n=g.call(this,this.navigation[e].elmt),this.navigation[e].start=n.start,this.navigation[e].end=n.end;u.call(this,t)}function m(e){var n=t("<li/>"),s=t("<span/>").addClass(this.settings.elementAttrs.class).css(this.settings.elementCSS).text(e).appendTo(n),i=t("<span/>").addClass(this.settings.pillsAttrs.class).css(this.settings.pillsCSS).appendTo(s);return{li:n,span:s,pills:i}}function g(t,e,n){var s,i,l,a=e||null,c=n||null,u=null,o=null;return s=t.offset().top,l=t.outerHeight(!0),i=s+l,this.range.max=this.range.max<i-this.settings.delta?i-this.settings.delta:this.range.max,a&&(u=a.position().top,o=a.outerHeight(!0)),{menuElmt:{menuElmt:a,pills:c,top:u,height:o},elmt:t,start:s,end:i}}function d(){var t,e,n=this.navigation.length;for(t=0;t<n;t++)e=this.navigation[t].menuElmt,e.top=e.menuElmt.position().top,e.height=e.menuElmt.outerHeight(!0)}function p(t,e,n){var s=e,i=n;if(n&&(s=n,i=e),"function"==typeof this.settings[t])try{this.settings[t].call(this,s,i)}catch(e){console.log(e),W[t].call(this,s,i)}else W[t].call(this,s,i)}function v(t){e.addEventListener("scroll",r.bind(this)),e.addEventListener("resize",h.bind(this,t))}function b(t,e,n){var s=n||0;return e>=t.start-s&&e<t.end-s}function f(n,s){t(e).scrollTop(s.start)}function S(){this.menu.wrapper.fadeOut()}function C(){this.menu.wrapper.fadeIn()}function E(e){var n,s,i,l,c,u,o;l=this,n=this.menu.navPills,c=this.navigation[e],s=c.menuElmt,u=l.settings.animWhileDelay,o=l.settings.animWhileEnd,"number"!=typeof u&&(a("settings","animWhileDelay"),u=A.animWhileDelay),"number"!=typeof o&&(a("settings","animWhileEnd"),o=A.animWhileEnd),c.menuElmt.menuElmt.removeClass(l.settings.activeClass),i=s.top+Math.round(s.height/2)-Math.round(n.height/2),n.navPills.addClass(l.settings.pillsActiveClass).animate({top:i},u,function(){c===l.navigation[l.state.active]&&c.menuElmt.menuElmt.addClass(l.settings.activeClass),c.menuElmt.pills.addClass(l.settings.animWhileClass).delay(o).queue(function(){t(this).removeClass(l.settings.animWhileClass).clearQueue()}),n.navPills.removeClass(l.settings.pillsActiveClass)})}function y(){var t=e.pageXOffset!==s,i="CSS1Compat"===(n.compatMode||"");return t?e.pageYOffset:i?n.documentElement.scrollTop:n.body.scrollTop}var A={menuTarget:null,lineActive:"middle",deltaSectionEnd:"middle",subSelector:"ssm-section",animWhileClass:"ssm-radar",animWhileDelay:100,animWhileEnd:1e3,activeClass:"ssm-sub-active",pillsActiveClass:"ssm-pills-active",wrapperAttrs:{class:"ssm-sub-menu"},elementAttrs:{class:"ssm-elmt"},pillsAttrs:{class:"ssm-pills ssm-cn"},navPillsAttrs:{class:"ssm-nav-pills"},wrapperCSS:{},elementCSS:{},pillsCSS:{},navPillsCSS:{},animExitFn:null,animEnterFn:null,animWhileFn:null,clickHandlerFn:null,elementCreateCallback:null,scrollStepCallback:null},M={selector:{basic:"Argument must be element ID string or jQuery object."},noResult:{basic:"Wrong ID, no jQuery object match."},settings:{basic:"Unrecognized settings expression or wrong value.",animWhileDelay:"animWhileDelay must be type Number.",animWhileEnd:"animWhileEnd must be type Number.",menuTarget:"menuTarget must be type String matching element ID or jQuery Object.",lineActive:"lineActive must be type Number or String value top|middle|bottom.",deltaSectionEnd:"deltaSectionEnd must be type Number or String value top|middle|bottom.",subSelector:"subSelector must be type String."},method:{basic:"Unrecognized method expression.",noInstance:"SubMenu must be instancied before calling methods. Method wont be called."}},W={animExitFn:S,animEnterFn:C,animWhileFn:E,clickHandlerFn:f},k={init:function(e,n){return this.each(function(){var s,a=t(this),c=a.data("subMenuPlugin"),u=t.extend({},A,e);c?c.subMenuInstance?(t.extend(a.data("subMenuPlugin").subMenuInstance.settings,e),"function"==typeof n&&n.call(a,a.data("subMenuPlugin").subMenuInstance)):(s=new i(u),a.data("subMenuPlugin",t.extend({},c,{subMenuInstance:s})),l.call(s,a,n)):(s=new i(u),a.data("subMenuPlugin",{subMenuInstance:s}),l.call(s,a,n))})},getMenuItems:function(e,n){var s=t(this),i=s.data("subMenuPlugin");return i&&i.subMenuInstance?i.subMenuInstance.getMenuItems():(a("method","noInstance","getMenuItems"),void k.init.call(s,e,n))}};t.fn.ScrollSubMenu=function(t,e,n){return"function"==typeof e&&(n=e,e=null),"function"==typeof t?(n=t,e=null,t=null):"object"==typeof t&&(e=t,t=null),k[t]?k[t].call(this,e,n):t||"object"!=typeof e&&e?void a("method",t):k.init.call(this,e,n)},i.prototype={getMenuItems:function(){return this.menu}}}(jQuery,this,this.document);